import{f as h,u as y,d as f,x as j,r as n,j as e,e as N}from"./customer-portal.js";import{t as g,B as v,C as b,b as w,c as C,a as D,d as k}from"./customer-portal-Dytd1BVN.js";import{B as I}from"./customer-portal-DohqzjMo.js";import{D as L}from"./customer-portal-C7OaD64w.js";import{A as F}from"./customer-portal-BXFxuucs.js";import{F as i}from"./customer-portal-C7hO-zpq.js";import{C as B}from"./customer-portal-BR0yYcp_.js";import{B as T}from"./customer-portal-jioiUtxO.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=h("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);function G(){const[,m]=y(),{language:d}=f(),a=g[d].dashboard,{data:r,isLoading:x,error:c}=j({queryKey:["invoices"],queryFn:async()=>(await N("GET","/api/customer/invoices")).json(),retry:!1}),u=n.useMemo(()=>{const s=new Intl.NumberFormat("fr-MA",{style:"currency",currency:"MAD"});return t=>s.format(parseFloat(t))},[]),o=n.useMemo(()=>{const s=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"});return t=>s.format(new Date(t))},[]);n.useEffect(()=>{c&&console.error("Invoices fetch error:",c)},[c]);const p=s=>{switch(s.toLowerCase()){case"paid":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"overdue":return"bg-red-100 text-red-800";case"draft":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},l=(s,t)=>!s||t.toLowerCase()==="paid"?!1:new Date(s)<new Date;return x?e.jsx(L,{}):r?e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"var(--portal-background)"},children:[e.jsx("header",{className:"portal-card border-b sticky top-0 z-40",style:{borderColor:"var(--border)"},children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(v,{variant:"ghost",size:"sm",onClick:()=>m("/dashboard"),className:"flex items-center space-x-2",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx("span",{children:a.backToDashboard})]})}),e.jsx("h1",{className:"text-xl font-semibold",style:{color:"var(--portal-text)"},children:a.allInvoices}),e.jsx("div",{className:"w-32"})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs(b,{className:"portal-card border-portal",children:[e.jsx(w,{children:e.jsxs(C,{style:{color:"var(--portal-text)"},children:[a.invoiceHistory," (",r.length," ",a.invoices,")"]})}),e.jsx(D,{children:r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(i,{className:"mx-auto h-16 w-16 mb-4",style:{color:"var(--portal-accent)"}}),e.jsx("h3",{className:"text-lg font-medium mb-2",style:{color:"var(--portal-text)"},children:a.noInvoicesFound}),e.jsx("p",{style:{color:"var(--portal-accent)"},children:a.noInvoicesReceived})]}):e.jsx("div",{className:"space-y-4",children:r.map(s=>e.jsx("div",{className:"border rounded-lg p-6 hover:shadow-md transition-shadow",style:{borderColor:"var(--border)"},children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-lg flex items-center justify-center",style:{backgroundColor:"var(--portal-primary)"},children:e.jsx(i,{className:"text-white text-lg"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",style:{color:"var(--portal-text)"},children:s.invoiceNumber}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(B,{className:"h-4 w-4",style:{color:"var(--portal-accent)"}}),e.jsxs("span",{className:"text-sm",style:{color:"var(--portal-accent)"},children:[a.issued,": ",o(s.invoiceDate)]})]}),s.dueDate&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(A,{className:`h-4 w-4 ${l(s.dueDate,s.status)?"text-red-500":""}`,style:{color:l(s.dueDate,s.status)?"red":"var(--portal-accent)"}}),e.jsxs("span",{className:`text-sm ${l(s.dueDate,s.status)?"text-red-500":""}`,style:{color:l(s.dueDate,s.status)?"red":"var(--portal-accent)"},children:[a.due,": ",o(s.dueDate)]})]}),s.paidDate&&e.jsx("div",{className:"flex items-center space-x-1",children:e.jsxs("span",{className:"text-sm text-green-600",children:[a.paid,": ",o(s.paidDate)]})})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(T,{className:"h-4 w-4",style:{color:"var(--portal-secondary)"}}),e.jsx("span",{className:"text-xl font-bold",style:{color:"var(--portal-text)"},children:u(s.amount)})]}),e.jsx(I,{className:p(s.status),children:k(s.status,d)})]})]})},s.id))})})]})})]}):null}export{G as default};
